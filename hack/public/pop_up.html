<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Welcome to a popo up</title>
    <style media="screen">
      body {
        font-family: Roboto, Arial, sans-serif;
        background: #ECEFF1;
        color: rgba(0,0,0,0.87);
      }

      a {
        color: rgb(3,155,229);
      }

      #message {
        max-width: 400px;
        margin: 40px auto;
        box-shadow: 0 1px 3px 0 rgba(0,0,0,0.2),0 1px 1px 0 rgba(0,0,0,0.14),0 2px 1px -1px rgba(0,0,0,0.12);
        border-radius: 2px;
        background: white;
        padding: 16px 24px;
      }

      #message h1 {
        font-size: 22px;
        font-weight: 500;
        text-align: center;
        margin: 0 0 16px;
      }

      #message p {
        font-weight: 300;
        line-height: 150%;
      }

      #message ul {
        list-style: none;
        margin: 16px 0 0;
        padding: 0;
        text-align: center;
      }

      #message li a {
        display: inline-block;
        padding: 8px;
        text-transform: uppercase;
        text-decoration: none;
        font-weight: 500;
        background: rgb(3,155,229);
        color: white;
        border: 1px solid rgb(3,155,229);
        border-radius: 3px;
        font-size: 14px;
        box-shadow: 0 2px 5px 0 rgba(0,0,0,.26);
      }
        
   
    </style>
  </head>
  <body>

      <div id="table">
        
      </div>
 
      
    <h1 id="bigOne"></h1>
      
      <table id="myTable">
          
          
          <tr>
            <th>Name</th>
            <th>Location</th>
            <th>Phone</th>
          </tr>
        </table>


    <script src="https://www.gstatic.com/firebasejs/3.5.1/firebase.js"></script>
    <script>
  // Initialize Firebase
        var config = {
            apiKey: "AIzaSyDQFEaP7UHTZ5YU8tTf2ATatw4hou5i7Z8",
            authDomain: "helpthehomeless-bc93a.firebaseapp.com",
            databaseURL: "https://helpthehomeless-bc93a.firebaseio.com",
            storageBucket: "helpthehomeless-bc93a.appspot.com",
            messagingSenderId: "732959824565"
        };
        firebase.initializeApp(config);

      var bigOne = document.getElementById('bigOne');
      var dbRef = firebase.database().ref().child('users/');

     //dbRef.on('value', snap => bigOne.innerText = snap.val()); 

      function writeUserData (root, userId, name, email, imageUrl) {
            firebase.database().ref('/' + root + '/' + userId).set({
            fname: name,
            lname: email,
            phone_number : imageUrl
            });
       }
        
       
        function create_table () {
            
                var myTableDiv = document.getElementById("table");
                var table = document.createElement('TABLE')
                var tableBody = document.createElement('TBODY')

                table.border=1;
                table.appendChild(tableBody);

                //table header
                var heading = new Array();
                heading[0] = "Name"
                heading[1] = "Location"
                heading[2] = "Phone"
                

                
            
        
        
        
        
        //---------------
            
            var phone_arr = new Array();
            //phone_arr.push("this is something");
            var i = 0;
            
            var table1 = document.getElementById("myTable");
            
            var query = firebase.database().ref("phone").orderByKey();
            query.once("value").then(function(snapshot) {
                snapshot.forEach(function(childSnapshot) {
                // key will be "ada" the first time and "alan" the second time
                   
                    var key = childSnapshot.key;
                   // console.log(key.toString());
                    //phone_arr.push(key.toString());
                    
                    
                    // childData will be the actual contents of the child
                    var childData = childSnapshot.val();
                    document.getElementById('bigOne').innerHTML = key;
                    // Find a <table> element with id="myTable":
                    

                    // Create an empty <tr> element and add it to the 1st position of the table:
                    var row = table1.insertRow(i++);

                    // Insert new cells (<td> elements) at the 1st and 2nd position of the "new" <tr> element:
                    var cell1 = row.insertCell(0);
                    var cell2 = row.insertCell(1);
                    var cell3 = row.insertCell(2);
                    

                    // Add some text to the new cells:
                    cell1.innerHTML = "1";
                    cell2.innerHTML = "g";
                    cell3.innerHTML = key;
                    
                    //cell2.innerHTML = "NEW CELL2";
                    
                    
                });
            });
           
            
            
           // console.log("after push");
           // console.log(phone_arr);
            
            //var data_arr = new Array();
            //var  opps= new Array();
            
            var g = 1;
            var t = 0;
            
            console.log(table1.rows[1].cells[2]);
            
            table1.rows[0].cells[0].innerHTML = 'name';
            
            var query = firebase.database().ref("phone").orderByKey();
            query.once("value").then(function(snapshot) {
                snapshot.forEach(function(childSnapshot) {
                    childSnapshot.forEach(function(childSnapshot2) {
                        var key2 = childSnapshot2.key;
                        var childData = childSnapshot2.val();
                        
                        //data_arr.push(childData);
                        var ro = table1.rows[g];
                        var cell1 = ro.cells[t++];
                        
                        cell1.innerHTML = childData;
                        
                        
                        

                       // document.getElementById('bigOne').innerHTML = childData;
                        
                    });
                // key will be "ada" the first time and "alan" the second time
                    t = 0;
                    ++g;
                });
            });
            
             //div.appendChild(myTable);
            
            //table data
            /*
                var data = new Array();
                data[0] = new Array("1","Mobile Phone", "iPhone", "500.00", "Apple iPhone 16GB", "250");
                data[1] = new Array("1","Mobile Phone", "Nexus", "400.00", "Google Nexus 16GB", "150");
            */
                if (phone_arr.length == 0) {
                    console.log(phone_arr[0]);
                    console.log(phone_arr);
                }
                console.log(data_arr);
                console.log(heading);
            
                for (s = 0; s < data_arr.length; ++s) {
                    document.getElementById('bigOne').innerHTML = header[2];
                }
            
            
                var _arr = new Array();
            //var x = 0;
            //var y = 0;
            
            for(i =0, x = 0, y = 0; i < heading.length; i++){
                _arr.push( new Array() );
                for (j = 0; j < 1; j++) {
                    _arr[i].push(data_arr[x]);
                    _arr[i].push(data_arr[x++]);
                    _arr[i].push(phone_arr[y++]);
                }
            }
            
            console.log(_arr);

                //table columns
                var tr = document.createElement('TR');
                tableBody.appendChild(tr);
                for(i = 0 ; i < heading.length; i++ ) {
                    var th = document.createElement('TH');
                    th.width = '75';
                    th.appendChild(document.createTextNode(heading[i]));
                    tr.appendChild(th);
                }
/*

                // Create table.
                var table = document.createElement('table');
                // Insert New Row for table at index '0'.
            
                
            
                var row1 = table.insertRow(0);
                // Insert New Column for Row1 at index '0'.
                var row1col1 = row1.insertCell(0);
                row1col1.innerHTML = 'Col1';
                // Insert New Column for Row1 at index '1'.
                var row1col2 = row1.insertCell(1);
                row1col2.innerHTML = 'Col2';
                // Insert New Column for Row1 at index '2'.
                var row1col3 = row1.insertCell(2);
                row1col3.innerHTML = 'Col3';
                // Append Table into div.
            
     
            
                var div = document.getElementById('Table');
                div.appendChild(table);
*/  
            
                //table rows
                for(i = 0; i < _arr.length; i++) {
                    var tr = document.createElement('TR');
                    for(j = 0; j < _arr[i].length; j++) {
                        var td = document.createElement('TD');
                        td.appendChild(document.createTextNode(_arr[i][j]));
                        tr.appendChild(td);
                    }
                    tableBody.appendChild(tr);
                }
            
                myTableDiv.appendChild(table);
            
            
        }
        
      </script>
<script>
    create_table();
</script>
    
  </body>
</html>
